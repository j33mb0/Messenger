{"ast":null,"code":"import { inject } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { matchFieldsAsyncValidator } from './matchFieldsValidator';\nimport { AuthService } from '../auth.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\n\nfunction LoginpageComponent_form_8_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵtext(1, \" Minimal length: 6 \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginpageComponent_form_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"form\", 9)(1, \"p\", 10);\n    i0.ɵɵtext(2, \"SIGN IN\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 11)(4, \"label\", 12);\n    i0.ɵɵtext(5, \"Login\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"input\", 13);\n    i0.ɵɵtemplate(7, LoginpageComponent_form_8_div_7_Template, 2, 0, \"div\", 14);\n    i0.ɵɵelementStart(8, \"label\", 12);\n    i0.ɵɵtext(9, \"Password\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(10, \"input\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function LoginpageComponent_form_8_Template_button_click_11_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.login());\n    });\n    i0.ɵɵtext(12, \" Sign in \");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    let tmp_1_0;\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.loginForm);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngIf\", (tmp_1_0 = ctx_r0.loginForm.get(\"login\")) == null ? null : tmp_1_0.hasError(\"minlength\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"disabled\", ctx_r0.loginForm.invalid);\n  }\n}\n\nfunction LoginpageComponent_form_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"form\", 9)(1, \"p\", 18);\n    i0.ɵɵtext(2, \"REGISTER\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 11)(4, \"label\", 12);\n    i0.ɵɵtext(5, \"Login\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"input\", 13);\n    i0.ɵɵelementStart(7, \"label\", 12);\n    i0.ɵɵtext(8, \"Password\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"input\", 15);\n    i0.ɵɵelementStart(10, \"label\", 12);\n    i0.ɵɵtext(11, \"Repeat the password\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(12, \"input\", 19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function LoginpageComponent_form_9_Template_button_click_13_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.register());\n    });\n    i0.ɵɵtext(14, \" Register \");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.registerForm);\n    i0.ɵɵadvance(13);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.registerForm.invalid);\n  }\n}\n\nfunction LoginpageComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21)(1, \"p\", 22);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.errorMsg, \" \");\n  }\n}\n\nfunction LoginpageComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21)(1, \"p\", 22);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.registerErrorMsg, \" \");\n  }\n}\n\nfunction LoginpageComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23)(1, \"p\", 24);\n    i0.ɵɵtext(2, \" Registration successful \");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nconst _c0 = function (a0) {\n  return {\n    \"SelectedBtn\": a0\n  };\n};\n\nexport let LoginpageComponent = /*#__PURE__*/(() => {\n  class LoginpageComponent {\n    constructor() {\n      this.fb = inject(FormBuilder);\n      this.router = inject(Router);\n      this.authService = inject(AuthService);\n      this.errorMsg = 'error';\n      this.registerErrorMsg = 'error';\n      this.isLoginFormVisible = true;\n      this.isRegisterFormVisible = false;\n      this.isFirstButtonSelected = true;\n      this.isSecondButtonSelected = false;\n      this.isLoginErrorVisible = false;\n      this.isRegisterErrorVisible = false;\n      this.isRegisterSuccessful = false;\n    }\n\n    ngOnInit() {\n      this.loginForm = this.fb.group({\n        login: ['', [Validators.required, Validators.minLength(6)]],\n        password: ['', [Validators.required, Validators.minLength(8)]]\n      });\n      this.registerForm = this.fb.group({\n        login: ['', [Validators.required, Validators.minLength(6)]],\n        password: ['', [Validators.required, Validators.minLength(8)]],\n        confirmPassword: ['', [Validators.required, Validators.minLength(8)]]\n      }, {\n        asyncValidators: [matchFieldsAsyncValidator('password', 'confirmPassword')]\n      });\n    }\n\n    toogleForm(formId) {\n      if (formId === 'loginForm') {\n        this.isLoginFormVisible = true;\n        this.isRegisterFormVisible = false;\n        this.isFirstButtonSelected = true;\n        this.isSecondButtonSelected = false;\n      } else if (formId === 'registerForm') {\n        this.isLoginFormVisible = false;\n        this.isRegisterFormVisible = true;\n        this.isFirstButtonSelected = false;\n        this.isSecondButtonSelected = true;\n        this.isLoginErrorVisible = false;\n      }\n    }\n\n    login() {\n      var _a, _b;\n\n      this.isLoginErrorVisible = false;\n      const login = (_a = this.loginForm.get('login')) === null || _a === void 0 ? void 0 : _a.value;\n      const password = (_b = this.loginForm.get('password')) === null || _b === void 0 ? void 0 : _b.value;\n      this.authService.login(login, password).subscribe(response => {\n        this.authService.setToken(response.token);\n        this.router.navigate(['']);\n      }, error => {\n        this.isLoginErrorVisible = true;\n        this.errorMsg = error.error;\n      });\n    }\n\n    register() {\n      var _a, _b;\n\n      this.isRegisterErrorVisible = false;\n      const login = (_a = this.registerForm.get('login')) === null || _a === void 0 ? void 0 : _a.value;\n      const password = (_b = this.registerForm.get('password')) === null || _b === void 0 ? void 0 : _b.value;\n      this.authService.register(login, password).subscribe(response => {\n        console.log('register succsesful');\n        this.toogleForm('loginForm');\n        this.isRegisterSuccessful = true;\n      }, error => {\n        this.isRegisterErrorVisible = true;\n        this.registerErrorMsg = error.error;\n      });\n    }\n\n  }\n\n  LoginpageComponent.ɵfac = function LoginpageComponent_Factory(t) {\n    return new (t || LoginpageComponent)();\n  };\n\n  LoginpageComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginpageComponent,\n    selectors: [[\"app-loginpage\"]],\n    decls: 13,\n    vars: 11,\n    consts: [[1, \"loginpage-container\"], [1, \"login-content\"], [1, \"button-menu\"], [\"id\", \"loginBtn\", 1, \"Btn\", 3, \"ngClass\", \"click\"], [\"id\", \"registerBtn\", 1, \"Btn\", 3, \"ngClass\", \"click\"], [1, \"forms-container\"], [\"id\", \"loginForm\", \"class\", \"loginForm\", 3, \"formGroup\", 4, \"ngIf\"], [\"class\", \"errorLoginDiv\", 4, \"ngIf\"], [\"class\", \"successfulRegisterDiv\", 4, \"ngIf\"], [\"id\", \"loginForm\", 1, \"loginForm\", 3, \"formGroup\"], [1, \"psign\"], [1, \"inputs-container\"], [1, \"label\"], [\"formControlName\", \"login\", \"type\", \"text\", \"placeholder\", \"Input login here...\", 1, \"logininput\"], [\"class\", \"errormsglogin\", 4, \"ngIf\"], [\"formControlName\", \"password\", \"type\", \"password\", \"placeholder\", \"Input password here...\", 1, \"passwordinput\"], [\"type\", \"submit\", 1, \"inputBtn\", 3, \"disabled\", \"click\"], [1, \"errormsglogin\"], [1, \"psigp\"], [\"formControlName\", \"confirmPassword\", \"type\", \"password\", \"placeholder\", \"Repeat the password here...\", 1, \"passwordinput\"], [\"type\", \"submit\", 1, \"regBtn\", 3, \"disabled\", \"click\"], [1, \"errorLoginDiv\"], [1, \"errorMsg\"], [1, \"successfulRegisterDiv\"], [1, \"successMsg\"]],\n    template: function LoginpageComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"button\", 3);\n        i0.ɵɵlistener(\"click\", function LoginpageComponent_Template_button_click_3_listener() {\n          return ctx.toogleForm(\"loginForm\");\n        });\n        i0.ɵɵtext(4, \"SIGN IN\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"button\", 4);\n        i0.ɵɵlistener(\"click\", function LoginpageComponent_Template_button_click_5_listener() {\n          return ctx.toogleForm(\"registerForm\");\n        });\n        i0.ɵɵtext(6, \"SIGN UP\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"div\", 5);\n        i0.ɵɵtemplate(8, LoginpageComponent_form_8_Template, 13, 3, \"form\", 6);\n        i0.ɵɵtemplate(9, LoginpageComponent_form_9_Template, 15, 2, \"form\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(10, LoginpageComponent_div_10_Template, 3, 1, \"div\", 7);\n        i0.ɵɵtemplate(11, LoginpageComponent_div_11_Template, 3, 1, \"div\", 7);\n        i0.ɵɵtemplate(12, LoginpageComponent_div_12_Template, 3, 0, \"div\", 8);\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(7, _c0, ctx.isFirstButtonSelected));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(9, _c0, ctx.isSecondButtonSelected));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoginFormVisible);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isRegisterFormVisible);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoginErrorVisible);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isRegisterErrorVisible);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isRegisterSuccessful);\n      }\n    },\n    dependencies: [i1.NgClass, i1.NgIf, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName],\n    styles: [\".loginpage-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:98vh;padding:0;margin:0}.forms-container[_ngcontent-%COMP%]{background-color:#dcfeed;width:25vw;height:60vh;display:flex;justify-content:center;border-radius:5px;border:1px solid #9CF1C8;text-align:center}.SelectedBtn[_ngcontent-%COMP%]{background-color:#97d7e7}.Btn[_ngcontent-%COMP%]{font-family:inherit}.psign[_ngcontent-%COMP%]{font-size:30px;margin-top:80px;margin-bottom:70px}.psigp[_ngcontent-%COMP%]{font-size:30px;margin-top:60px;margin-bottom:50px}.inputs-container[_ngcontent-%COMP%]{display:block;text-align:left;margin-left:30px}.label[_ngcontent-%COMP%]{display:block;float:left;margin-left:15px;font-family:inherit;font-size:1rem}.logininput[_ngcontent-%COMP%]{display:block;width:90%;float:left;height:calc(1.25rem + 2px);padding:.375rem .75rem;font-family:inherit;font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;background-clip:padding-box;border:1px solid #bdbdbd;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;margin-bottom:40px}.passwordinput[_ngcontent-%COMP%]{display:block;float:left;width:90%;height:calc(1.25rem + 2px);padding:.375rem .75rem;font-family:inherit;font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;background-clip:padding-box;border:1px solid #bdbdbd;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;margin-bottom:40px}.inputBtn[_ngcontent-%COMP%]{margin-top:80px;width:14rem;height:3rem;font-size:1rem;font-family:inherit;background-color:#97d7e7;border-radius:5px}.regBtn[_ngcontent-%COMP%]{margin-top:20px;width:14rem;height:3rem;font-size:1rem;font-family:inherit;background-color:#97d7e7;border-radius:5px}.errormsglogin[_ngcontent-%COMP%]{color:red;font-size:.75rem;margin-left:80px}.errormsgpassword[_ngcontent-%COMP%]{color:red;font-size:.75rem;margin-left:100px;margin-top:150px}.errorLoginDiv[_ngcontent-%COMP%]{background-color:#ec6262;height:30px;color:#140f0f;border-radius:3px;display:flex;align-items:center;justify-content:center}.successfulRegisterDiv[_ngcontent-%COMP%]{background-color:#3feb78;height:30px;color:#140f0f;border-radius:3px;display:flex;align-items:center;justify-content:center}\"]\n  });\n  return LoginpageComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}