{"ast":null,"code":"import { inject } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AuthService } from '../auth.service';\nimport { DataService } from '../data.service';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\n\nfunction HeaderpageComponent_div_14_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28)(1, \"p\", 29);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.changeNicknameError);\n  }\n}\n\nfunction HeaderpageComponent_div_14_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30)(1, \"p\", 31);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.changeAvatarError);\n  }\n}\n\nfunction HeaderpageComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"div\", 14)(2, \"p\", 15);\n    i0.ɵɵtext(3, \"Settings\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 16)(5, \"p\", 17);\n    i0.ɵɵtext(6, \"Change nickname:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"input\", 18);\n    i0.ɵɵelementStart(8, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function HeaderpageComponent_div_14_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.changeNickname());\n    });\n    i0.ɵɵelement(9, \"img\", 20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(10, HeaderpageComponent_div_14_div_10_Template, 3, 1, \"div\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 22)(12, \"p\", 23);\n    i0.ɵɵtext(13, \"Change userimg\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(14, \"input\", 24);\n    i0.ɵɵelementStart(15, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function HeaderpageComponent_div_14_Template_button_click_15_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.changeUserimg());\n    });\n    i0.ɵɵelement(16, \"img\", 26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(17, HeaderpageComponent_div_14_div_17_Template, 3, 1, \"div\", 27);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.changeNicknameForm);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"disabled\", ctx_r0.changeNicknameForm.invalid);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isChangeNicknameErrorVisible);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.changeAvatarForm);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"disabled\", ctx_r0.changeAvatarForm.invalid);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isChangeAvatarErrorVisible);\n  }\n}\n\nexport let HeaderpageComponent = /*#__PURE__*/(() => {\n  class HeaderpageComponent {\n    constructor() {\n      this.router = inject(Router);\n      this.authService = inject(AuthService);\n      this.dataService = inject(DataService);\n      this.fb = inject(FormBuilder);\n      this.isDropdownOpen = false;\n      this.isChangeNicknameErrorVisible = false;\n      this.changeNicknameError = '';\n      this.isChangeAvatarErrorVisible = false;\n      this.changeAvatarError = '';\n      this.username = 'username';\n      this.userimg = 'https://cdn-icons-png.flaticon.com/512/3607/3607444.png';\n    }\n\n    ngOnInit() {\n      this.getUserData();\n      this.changeNicknameForm = this.fb.group({\n        nickname: ['', [Validators.required, Validators.minLength(6)]]\n      });\n      this.changeAvatarForm = this.fb.group({\n        url: ['', [Validators.required, Validators.minLength(6)]]\n      });\n    }\n\n    toogleDropdown() {\n      this.isDropdownOpen = !this.isDropdownOpen;\n    }\n\n    logOut() {\n      this.authService.removeToken();\n      this.router.navigate(['/login']);\n    }\n\n    changeNickname() {\n      var _a;\n\n      var nickname = (_a = this.changeNicknameForm.get('nickname')) === null || _a === void 0 ? void 0 : _a.value;\n      this.dataService.changeNickname(nickname).subscribe(response => {\n        this.isChangeNicknameErrorVisible = false;\n        this.getUserData();\n      }, error => {\n        this.changeNicknameError = error.error;\n        this.isChangeNicknameErrorVisible = true;\n      });\n    }\n\n    changeUserimg() {\n      var _a;\n\n      var userImg = (_a = this.changeAvatarForm.get('url')) === null || _a === void 0 ? void 0 : _a.value;\n      this.dataService.changeUserImg(userImg).subscribe(response => {\n        this.isChangeAvatarErrorVisible = false;\n        this.getUserData();\n      }, error => {\n        this.changeAvatarError = error.error;\n        this.isChangeAvatarErrorVisible = true;\n      });\n    }\n\n    getUserData() {\n      this.dataService.getUserData().subscribe(userData => {\n        this.username = userData.username;\n        this.userimg = userData.userimgurl;\n      }, error => {});\n    }\n\n  }\n\n  HeaderpageComponent.ɵfac = function HeaderpageComponent_Factory(t) {\n    return new (t || HeaderpageComponent)();\n  };\n\n  HeaderpageComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HeaderpageComponent,\n    selectors: [[\"app-headerpage\"]],\n    decls: 15,\n    vars: 3,\n    consts: [[1, \"main-container\"], [1, \"container\"], [1, \"name-container\"], [1, \"name-label\"], [1, \"userpanel-container\"], [1, \"imguserheader\", 3, \"src\"], [1, \"username-label\"], [1, \"buttons-container\"], [1, \"settings-button\", 3, \"click\"], [\"src\", \"data:image/png;base64,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\", 1, \"settings-button-img\"], [1, \"logout-button\", 3, \"click\"], [\"src\", \"https://cdn.vectorstock.com/i/transparent-2x/93/31/web-secure-session-sign-out-internet-logoff-vector-25729331.webp\", 1, \"logout-botton-img\"], [\"class\", \"dropdown-content\", 4, \"ngIf\"], [1, \"dropdown-content\"], [1, \"settingspdiv\"], [1, \"settingsp\"], [1, \"changenicknamediv\", 3, \"formGroup\"], [1, \"changenicknamep\"], [\"formControlName\", \"nickname\", \"type\", \"text\", \"placeholder\", \"Input new nickname here...\", 1, \"changenicknameinput\"], [1, \"changenicknamebutton\", 3, \"disabled\", \"click\"], [\"src\", \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRAJ7Get2YkUhisLi7eQ8HqlShRDI4T9A4QSxjvmA5bkg&s\", 1, \"changenicknamebuttonimg\"], [\"class\", \"changenicknameerrordiv\", 4, \"ngIf\"], [1, \"changeavatardiv\", 3, \"formGroup\"], [1, \"changeavatarp\"], [\"formControlName\", \"url\", \"type\", \"text\", \"placeholder\", \"Input new image url here...\", 1, \"changeavatarinput\"], [1, \"changeavatarbutton\", 3, \"disabled\", \"click\"], [\"src\", \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRAJ7Get2YkUhisLi7eQ8HqlShRDI4T9A4QSxjvmA5bkg&s\", 1, \"changeavatarbuttonimg\"], [\"class\", \"changeavatarerrordiv\", 4, \"ngIf\"], [1, \"changenicknameerrordiv\"], [1, \"nicknameerror\"], [1, \"changeavatarerrordiv\"], [1, \"avatarerror\"]],\n    template: function HeaderpageComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"label\", 3);\n        i0.ɵɵtext(4, \"MANKI CHAT\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(5, \"div\", 4);\n        i0.ɵɵelement(6, \"img\", 5);\n        i0.ɵɵelementStart(7, \"label\", 6);\n        i0.ɵɵtext(8);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"div\", 7)(10, \"button\", 8);\n        i0.ɵɵlistener(\"click\", function HeaderpageComponent_Template_button_click_10_listener() {\n          return ctx.toogleDropdown();\n        });\n        i0.ɵɵelement(11, \"img\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"button\", 10);\n        i0.ɵɵlistener(\"click\", function HeaderpageComponent_Template_button_click_12_listener() {\n          return ctx.logOut();\n        });\n        i0.ɵɵelement(13, \"img\", 11);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(14, HeaderpageComponent_div_14_Template, 18, 6, \"div\", 12);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"src\", ctx.userimg, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.username);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", ctx.isDropdownOpen);\n      }\n    },\n    dependencies: [i1.NgIf, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName],\n    styles: [\".main-container[_ngcontent-%COMP%]{width:98.5vw;background-color:#e6e6fa;margin-top:7px;margin-left:10px;border:1px solid #888;border-radius:5px}.container[_ngcontent-%COMP%]{display:flex;width:200vw;height:5vh;background-color:#e6e6fa;justify-content:space-between;align-items:center;position:relative}.name-container[_ngcontent-%COMP%]{margin-top:5px;margin-left:-100px;font-size:18px;font-weight:700}.userpanel-container[_ngcontent-%COMP%]{display:flex;right:0;position:absolute;margin-bottom:5px}.buttons-container[_ngcontent-%COMP%]{float:right;width:6vw;border:1px solid #888;justify-content:space-between;align-items:center;display:flex;margin-right:-250px}.settings-button-img[_ngcontent-%COMP%], .logout-botton-img[_ngcontent-%COMP%]{width:30px;height:30px}.imguserheader[_ngcontent-%COMP%]{width:40px;height:40px;margin-top:5px}.username-label[_ngcontent-%COMP%]{margin-left:10px;margin-top:18px}.settings-button[_ngcontent-%COMP%]{margin-left:10px}.logout-button[_ngcontent-%COMP%]{margin-right:10px;margin-left:5px}.dropdown-content[_ngcontent-%COMP%]{position:absolute;background-color:#93c1c7;width:420px;box-shadow:0 8px 16px #0003;z-index:1;margin-left:70vw;margin-top:7px;height:300px}.settingspdiv[_ngcontent-%COMP%]{text-align:center}.changenicknamediv[_ngcontent-%COMP%]{border-top:1px solid #888;border-bottom:1px solid #888}.changenicknamep[_ngcontent-%COMP%], .changeavatarp[_ngcontent-%COMP%]{margin-left:15px}.changenicknameinput[_ngcontent-%COMP%], .changeavatarinput[_ngcontent-%COMP%]{width:83%;height:15px;padding:.375rem .75rem;font-family:inherit;font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;background-clip:padding-box;border:1px solid #bdbdbd;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;margin-left:5px;margin-bottom:15px}.changenicknamebuttonimg[_ngcontent-%COMP%], .changeavatarbuttonimg[_ngcontent-%COMP%]{height:15px;width:15px}.changenicknameerrordiv[_ngcontent-%COMP%], .changeavatarerrordiv[_ngcontent-%COMP%]{background-color:red;width:90%;margin-left:20px}\"]\n  });\n  return HeaderpageComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}